<div *ngIf="cartItems == null" class="error_page">
    <p>Корзина пуста</p>
    <img src="../../assets/cart_404.png" alt="">
</div>

<div *ngIf="cartItems != null" class="cart">
    <div class="container">
        <div class="cart__info">
            <div class="cart__info-label">
                Оформите заказ
            </div>

            <form [formGroup]="orderForm" action="/order" (ngSubmit)="submitOrder()" class="cart__form">
                <label for="cart__form-email">Email</label>
                <input [ngClass]="{'invalid': orderForm.controls.email.errors && orderForm.controls.email.touched}"
                    formControlName="email" class="cart__form-input" id="cart__form-email" type="email"
                    placeholder="sneakers@gmail.com">

                <label for="cart__form-name">Ф.И.О</label>
                <input [ngClass]="{'invalid': orderForm.controls.name.errors && orderForm.controls.name.touched}"
                    formControlName="name" class="cart__form-input" id="cart__form-name" type="text"
                    placeholder="Иванов Иван Иванович">

                <label for="cart__form-phone">Телефон</label>
                <input [ngClass]="{'invalid': orderForm.controls.phone.errors && orderForm.controls.phone.touched}"
                    formControlName="phone" class="cart__form-input" id="cart__form-phone" type="tel"
                    placeholder="+373 686 123 12">

                <label for="cart__form-city">Город</label>
                <input [ngClass]="{'invalid': orderForm.controls.city.errors && orderForm.controls.city.touched}"
                    formControlName="city" class="cart__form-input" id="cart__form-city" type="tel"
                    placeholder="г. Бельцы">

                <label for="cart__form-commentary">Комментарий к заказу</label>
                <textarea formControlName="commentary" id="cart__form-commentary" class="cart__form-commentary"
                    cols="30" rows="10" placeholder="Комментарий к заказу"></textarea>

                <button type="submit" class="cart__form--button">
                    Оформить заказ
                </button>
            </form>
        </div>

        <div class="cart__wrapper">
            <div class="cart__wrapper-label">
                В корзине {{ cartItems.length }} товара
            </div>

            <hr class="cart__separator">

            <div class="cart__cost">
                <div class="cart__cost-items">
                    <p>Стоимость товаров</p>
                    <p>{{ totalPrice | currency: '&#8381; ': 'code' }}</p>
                </div>
            </div>

            <div *ngFor="let item of cartItems" class="cart__items">
                <hr class="cart__separator">

                <div class="cart__item">
                    <img class="cart__item-image" src="{{ domain + item.product_image }}" alt="sneaker photo">
                    <div class="cart__item-info">
                        <div>
                            <div class="cart__item-title">
                                {{ item.product_title }}
                            </div>
                            <div class="cart__item-price">
                                {{ item.product_price | currency: '&#8381; ':'code' }}
                            </div>
                        </div>
                        <div class="cart__info-wrapper">
                            <div class="cart__item-size">
                                Размер {{ item.product_size}}
                            </div>
                            <div class="cart__count">
                                <div class="cart__btn cart__count--btn" (click)="handleProductsCount(item, 'minus')">
                                    -
                                </div>
                                <p class="cart__count--counter">
                                    {{ item.product_count }}
                                </p>
                                <div class="cart__btn cart__count--btn" (click)="handleProductsCount(item, 'plus')">
                                    +
                                </div>
                            </div>
                            <div class="cart__delete" (click)="deleteCartItem(item.id)">
                                &#10006;
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>